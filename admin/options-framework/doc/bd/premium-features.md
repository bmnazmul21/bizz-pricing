# ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐ржЪрж╛рж░

ржПржЗ ржбржХрзБржорзЗржирзНржЯ BizzPlugin Options Framework-ржП ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо/ржкрзНрж░рзЛ ржлрж┐рж▓рзНржб рж▓ржХрж┐ржВ ржПржмржВ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржХрзАржнрж╛ржмрзЗ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи ржХрж░ржмрзЗржи рждрж╛ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзЗред

## ржУржнрж╛рж░ржнрж┐ржЙ

ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХ ржкрзГржержХ ржлрж┐рж▓рзНржбржХрзЗ "ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо" рж╣рж┐рж╕рзЗржмрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рж╛ рж╕ржорж░рзНржержи ржХрж░рзЗ, ржпрж╛ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ:
- ржлрж┐рж▓рзНржбрзЗ "ржмрзНрж▓ржХ ржХрж░рж╛" ржмрзНржпрж╛ржЬ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗ
- ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржб ржирж┐рж╖рзНржХрзНрж░рж┐ржпрж╝ ржХрж░рзЗ
- рж╕рзЗржЗ ржлрж┐рж▓рзНржбрзЗ ржкрж░рж┐ржмрж░рзНрждржи рж╕ржВрж░ржХрзНрж╖ржг ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рзЗ

ржПржЯрж┐ ржлрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржкрзНрж▓рж╛ржЧржЗржи рждрзИрж░рж┐рж░ ржЬржирзНржп ржжрж░ржХрж╛рж░рзА ржпрзЗржЦрж╛ржирзЗ ржХрж┐ржЫрзБ ржлрж┐ржЪрж╛рж░ ржлрзНрж░рж┐ ржнрж╛рж░рзНрж╕ржирзЗ рж▓ржХ ржерж╛ржХрзЗред

## ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ рж╕рзЗржЯ ржХрж░рж╛

### ржкрзНржпрж╛ржирзЗрж▓ рждрзИрж░рж┐рж░ рж╕ржоржпрж╝

```php
$framework->create_panel(array(
    'id'          => 'my_plugin',
    'title'       => __('ржЖржорж╛рж░ ржкрзНрж▓рж╛ржЧржЗржи', 'textdomain'),
    'menu_title'  => __('ржЖржорж╛рж░ ржкрзНрж▓рж╛ржЧржЗржи', 'textdomain'),
    'menu_slug'   => 'my-plugin',
    'capability'  => 'manage_options',
    'icon'        => 'dashicons-admin-settings',
    'position'    => 80,
    'option_name' => 'my_plugin_options',
    'is_premium'  => false,  // ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржб ржЖржирж▓ржХ ржХрж░рждрзЗ true рж╕рзЗржЯ ржХрж░рзБржи
    'sections'    => array(/* рж╕рзЗржХрж╢ржи */),
));
```

### ржЪрзЗржЗржирзЗржмрж▓ API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ

```php
$panel->set_premium(true);  // ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржб ржЖржирж▓ржХ ржХрж░рзБржи
$panel->set_premium(false); // ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржб рж▓ржХ ржХрж░рзБржи (ржбрж┐ржлрж▓рзНржЯ)
```

### ржлрж┐рж▓рзНржЯрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ

```php
add_filter('bizzplugin_is_premium_my_plugin', function($is_premium, $panel_id) {
    // ржЖржкржирж╛рж░ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржЪрзЗржХ ржХрж░рзБржи
    return my_plugin_license_is_valid();
}, 10, 2);
```

## ржлрж┐рж▓рзНржб ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рж╣рж┐рж╕рзЗржмрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рж╛

ржпрзЗржХрзЛржирзЛ ржлрж┐рж▓рзНржб рж╕ржВржЬрзНржЮрж╛ржпрж╝ `'premium' => true` ржпрзЛржЧ ржХрж░рзБржи:

```php
array(
    'id'          => 'advanced_feature',
    'type'        => 'switch',
    'title'       => __('ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб ржлрж┐ржЪрж╛рж░', 'textdomain'),
    'description' => __('ржПржЗ ржлрж┐ржЪрж╛рж░ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржнрж╛рж░рзНрж╕ржирзЗ ржЙржкрж▓ржмрзНржзред', 'textdomain'),
    'default'     => '0',
    'premium'     => true,  // ржПржЗ ржлрж┐рж▓рзНржб рж╢рзБржзрзБ-ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо
)
```

## ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓ ржЗржирзНржбрж┐ржХрзЗржЯрж░

### ржлрзНрж░рж┐ ржнрж╛рж░рзНрж╕ржи (is_premium = false)

ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржб ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗ:
- рж╢рж┐рж░рзЛржирж╛ржорзЗрж░ ржкрж╛рж╢рзЗ "ржмрзНрж▓ржХ ржХрж░рж╛" ржмрзНржпрж╛ржЬ
- ржирж┐рж╖рзНржХрзНрж░рж┐ржпрж╝/ржзрзВрж╕рж░ ржЗржиржкрзБржЯ
- рж▓ржХ ржЕржмрж╕рзНржерж╛ ржирж┐рж░рзНржжрзЗрж╢ржХ ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓ рж╕рзНржЯрж╛ржЗрж▓рж┐ржВ

### ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржнрж╛рж░рзНрж╕ржи (is_premium = true)

ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржб ржкрзВрж░рзНржг ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ рж╕рж╣ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржпрж╝ред

## ржмрзНржпрж╛ржЬ ржкрзНрж░ржжрж░рзНрж╢ржи

ржкрзНржпрж╛ржирзЗрж▓ рж╣рзЗржбрж╛рж░ ржжрзЗржЦрж╛ржпрж╝:
- "ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо" ржмрзНржпрж╛ржЬ (рж╕ржмрзБржЬ) - ржпржЦржи `is_premium` рж╕рждрзНржп
- "ржлрзНрж░рж┐" ржмрзНржпрж╛ржЬ (ржирзАрж▓) - ржпржЦржи `is_premium` ржорж┐ржерзНржпрж╛

## рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи ржЙржжрж╛рж╣рж░ржг

### ржорзМрж▓рж┐ржХ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржЪрзЗржХ

```php
class My_Plugin {
    private $is_premium = false;
    
    public function __construct() {
        // init-ржП рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржЪрзЗржХ ржХрж░рзБржи
        $this->is_premium = $this->check_license();
        
        add_action('init', array($this, 'init_settings'));
        add_filter('bizzplugin_is_premium_my_plugin', array($this, 'get_premium_status'), 10, 2);
    }
    
    private function check_license() {
        $license_key = get_option('my_plugin_license_key', '');
        $license_status = get_option('my_plugin_license_status', '');
        
        return !empty($license_key) && $license_status === 'valid';
    }
    
    public function get_premium_status($is_premium, $panel_id) {
        return $this->is_premium;
    }
    
    public function init_settings() {
        $framework = bizzplugin_framework();
        
        $framework->create_panel(array(
            'id'          => 'my_plugin',
            'title'       => __('ржЖржорж╛рж░ ржкрзНрж▓рж╛ржЧржЗржи', 'textdomain'),
            'option_name' => 'my_plugin_options',
            'is_premium'  => $this->is_premium,
            // ... ржЕржирзНржпрж╛ржирзНржп ржЕржкрж╢ржи
        ));
    }
}
```

### рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрзЗрж╢ржи рж╕рзЗржХрж╢ржи

```php
// ржЖржкржирж╛рж░ рж╕рзЗржЯрж┐ржВрж╕рзЗ ржПржХржЯрж┐ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ рж╕рзЗржХрж╢ржи ржпрзЛржЧ ржХрж░рзБржи
array(
    'id'          => 'license',
    'title'       => __('рж▓рж╛ржЗрж╕рзЗржирзНрж╕', 'textdomain'),
    'description' => __('ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐ржЪрж╛рж░ ржЖржирж▓ржХ ржХрж░рждрзЗ ржЖржкржирж╛рж░ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржХрзА рж▓рж┐ржЦрзБржиред', 'textdomain'),
    'icon'        => 'dashicons dashicons-admin-network',
    'fields'      => array(
        array(
            'id'          => 'license_key',
            'type'        => 'text',
            'title'       => __('рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржХрзА', 'textdomain'),
            'description' => __('ржЖржкржирж╛рж░ ржХрзНрж░ржпрж╝ рж░рж╕рж┐ржж ржерзЗржХрзЗ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржХрзА рж▓рж┐ржЦрзБржиред', 'textdomain'),
            'default'     => '',
            'placeholder' => __('xxxx-xxxx-xxxx-xxxx', 'textdomain'),
        ),
        array(
            'id'      => 'license_status',
            'type'    => 'html',
            'title'   => __('рж▓рж╛ржЗрж╕рзЗржирзНрж╕ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕', 'textdomain'),
            'content' => $this->get_license_status_html(),
        ),
    ),
),
```

### ржбрж╛ржпрж╝ржирж╛ржорж┐ржХ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржкрзНрж░ржжрж░рзНрж╢ржи

```php
private function get_license_status_html() {
    $status = get_option('my_plugin_license_status', '');
    
    if ($status === 'valid') {
        return '<div class="bizzplugin-notice bizzplugin-notice-success">
            <p><span class="dashicons dashicons-yes-alt"></span> ' . 
            esc_html__('рж▓рж╛ржЗрж╕рзЗржирзНрж╕ рж╕ржХрзНрж░рж┐ржпрж╝ ржПржмржВ ржмрзИржзред', 'textdomain') . '</p>
        </div>';
    } else {
        return '<div class="bizzplugin-notice bizzplugin-notice-warning">
            <p><span class="dashicons dashicons-warning"></span> ' . 
            esc_html__('ржХрзЛржи ржмрзИржз рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐ред ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐ржЪрж╛рж░ рж▓ржХ ржЖржЫрзЗред', 'textdomain') . '</p>
            <p><a href="https://example.com/purchase" target="_blank" class="button button-primary">' . 
            esc_html__('ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржирж┐ржи', 'textdomain') . '</a></p>
        </div>';
    }
}
```

## ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рж╕рзЗржХрж╢ржи

ржЖржкржирж┐ рж╕ржорзНржкрзВрж░рзНржг рж╕рзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи ржпрж╛ рж╢рзБржзрзБ-ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо:

```php
array(
    'id'          => 'premium_features',
    'title'       => __('ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐ржЪрж╛рж░', 'textdomain'),
    'description' => __('ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржжрзЗрж░ ржЬржирзНржп ржПржХрзНрж╕ржХрзНрж▓рзБрж╕рж┐ржн ржлрж┐ржЪрж╛рж░ред', 'textdomain'),
    'icon'        => 'dashicons dashicons-star-filled',
    'fields'      => array(
        array(
            'id'      => 'feature_1',
            'type'    => 'switch',
            'title'   => __('ржлрж┐ржЪрж╛рж░ ржПржХ', 'textdomain'),
            'default' => '0',
            'premium' => true,
        ),
        array(
            'id'      => 'feature_2',
            'type'    => 'switch',
            'title'   => __('ржлрж┐ржЪрж╛рж░ ржжрзБржЗ', 'textdomain'),
            'default' => '0',
            'premium' => true,
        ),
        array(
            'id'      => 'upgrade_notice',
            'type'    => 'html',
            'title'   => __('ржЖржкржЧрзНрж░рзЗржб', 'textdomain'),
            'content' => $this->is_premium ? '' : '<div class="bizzplugin-notice bizzplugin-notice-info">
                <p><strong>' . esc_html__('рж╕ржм ржлрж┐ржЪрж╛рж░ ржЖржирж▓ржХ ржХрж░рзБржи!', 'textdomain') . '</strong></p>
                <p>' . esc_html__('рж╕ржм ржлрж┐ржЪрж╛рж░рзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕рзЗрж░ ржЬржирзНржп ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржорзЗ ржЖржкржЧрзНрж░рзЗржб ржХрж░рзБржиред', 'textdomain') . '</p>
                <p><a href="#" class="button button-primary">' . esc_html__('ржПржЦржиржЗ ржЖржкржЧрзНрж░рзЗржб ржХрж░рзБржи', 'textdomain') . '</a></p>
            </div>',
        ),
    ),
),
```

## ржХрзЛржбрзЗ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ ржХрж░рж╛

### ржлрж┐рж▓рзНржб рж▓ржЬрж┐ржХрзЗ

```php
// ржлрж┐рж▓рзНржб ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ рж╕ржоржпрж╝
$options = get_option('my_plugin_options', array());
$framework = bizzplugin_framework();
$panel = $framework->get_panel('my_plugin');

if ($panel && $panel->is_premium()) {
    // ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐ржЪрж╛рж░ ржХрзЛржб
    $advanced_value = $options['advanced_feature'] ?? '0';
} else {
    // ржлрзНрж░рж┐ ржнрж╛рж░рзНрж╕ржи ржлрж▓ржмрзНржпрж╛ржХ
    $advanced_value = '0'; // ржбрж┐ржлрж▓рзНржЯ ржЬрзЛрж░ ржХрж░рзБржи
}
```

### ржЯрзЗржоржкрзНрж▓рзЗржЯрзЗ

```php
<?php
$framework = bizzplugin_framework();
$panel = $framework->get_panel('my_plugin');
$is_premium = $panel ? $panel->is_premium() : false;

if ($is_premium) : ?>
    <!-- ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐ржЪрж╛рж░ HTML -->
<?php else : ?>
    <!-- ржЖржкржЧрзНрж░рзЗржб ржкрзНрж░ржорзНржкржЯ рж╕рж╣ ржлрзНрж░рж┐ ржнрж╛рж░рзНрж╕ржи HTML -->
<?php endif; ?>
```

## рж╕рзЗрж░рж╛ ржЕржирзБрж╢рзАрж▓ржи

1. **рж╕рзНржкрж╖рзНржЯ ржпрзЛржЧрж╛ржпрзЛржЧ**: ржХрзЛржи ржлрж┐ржЪрж╛рж░ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рждрж╛ рж╕рзНржкрж╖рзНржЯ ржХрж░рзБржи
2. **ржЧрзНрж░рзЗрж╕ржлрзБрж▓ ржбрж┐ржЧрзНрж░рзЗржбрзЗрж╢ржи**: ржлрзНрж░рж┐ ржнрж╛рж░рзНрж╕ржи ржПржЦржиржУ ржжрж░ржХрж╛рж░рзА рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд
3. **ржЖржкржЧрзНрж░рзЗржб ржкрзНрж░ржорзНржкржЯ**: UI-рждрзЗ рж╕рзНржкрж╖рзНржЯ ржЖржкржЧрзНрж░рзЗржб ржкрж╛рже ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржХрж░рзБржи
4. **рж╕рж╛ржоржЮрзНржЬрж╕рзНржпржкрзВрж░рзНржг ржЪрзЗржХрж┐ржВ**: рж▓рж╛ржЗрж╕рзЗржирзНрж╕ ржЪрзЗржХрзЗрж░ ржЬржирзНржп ржлрж┐рж▓рзНржЯрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
5. **ржХрзНржпрж╛рж╢рж┐ржВ**: ржмрж╛рж░ржмрж╛рж░ API ржХрж▓ ржПржбрж╝рж╛рждрзЗ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржХрзНржпрж╛рж╢ ржХрж░рзБржи
6. **ржЕржлрж▓рж╛ржЗржи рж╕рж╛ржкрзЛрж░рзНржЯ**: рж▓рж╛ржЗрж╕рзЗржирзНрж╕ рж╕рж╛рж░рзНржнрж╛рж░ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ржпрзЛржЧрзНржп ржирж╛ рж╣рж▓рзЗ ржХрзЗрж╕ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рзБржи

## CSS ржХрж╛рж╕рзНржЯржорж╛ржЗржЬрзЗрж╢ржи

ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржбрзЗ ржПржЗ ржХрзНрж▓рж╛рж╕ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзЗ:

```css
/* рж▓ржХ ржХрж░рж╛ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржб ржХржирзНржЯрзЗржЗржирж╛рж░ */
.bizzplugin-field-premium-locked {
    opacity: 0.7;
    position: relative;
}

/* ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржмрзНржпрж╛ржЬ */
.bizzplugin-premium-badge {
    background: #dc3232;
    color: #fff;
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 3px;
    margin-left: 8px;
}
```

ржЖржкржирж┐ ржПржЗ рж╕рзНржЯрж╛ржЗрж▓ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

```css
/* ржХрж╛рж╕рзНржЯржо ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржлрж┐рж▓рзНржб рж╕рзНржЯрж╛ржЗрж▓рж┐ржВ */
.bizzplugin-field-premium-locked {
    background: linear-gradient(135deg, #f9f9f9 0%, #e9e9e9 100%);
    border-left: 4px solid #dba617;
}

.bizzplugin-field-premium-locked::after {
    content: "ЁЯФТ";
    position: absolute;
    right: 10px;
    top: 10px;
}
```

---

## ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржк

- [ржлрж┐рж▓рзНржб ржЯрж╛ржЗржк](field-types.md) - рж╕ржм ржлрж┐рж▓рзНржб ржЯрж╛ржЗржк рж░рзЗржлрж╛рж░рзЗржирзНрж╕
- [ржлрж┐рж▓рзНржЯрж╛рж░ ржПржмржВ рж╣рзБржХ](filters-hooks.md) - ржХрж╛рж╕рзНржЯржорж╛ржЗржЬрзЗрж╢ржи рж╣рзБржХ
- [ржЙржжрж╛рж╣рж░ржг](examples.md) - рж╕ржорзНржкрзВрж░рзНржг ржХрзЛржб ржЙржжрж╛рж╣рж░ржг
